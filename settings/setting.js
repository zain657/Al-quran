let form=document.getElementById("form"),language=document.getElementById("language"),type=document.getElementById("type"),reader=document.getElementById("reader"),submit=document.getElementById("submit"),info={},allLang=[],optionLang="";function createLangOption(e){for(let t=0;t<e.length;t++)optionLang+=`<option value="${e[t]}">${e[t]}</option>`}async function getLangApi(){try{let e=await fetch("https://api.alquran.cloud/v1/edition/language"),t=await e.json();allLang=t.data,createLangOption(allLang),retreve(optionLang,language)}catch(e){}}let allType=[],optionType="";function createTypeOption(e){for(let t=0;t<e.length;t++)optionType+=`<option value="${e[t].identifier}">${e[t].name}</option>`}async function getTypeApi(e){try{let t=await fetch(`https://api.alquran.cloud/v1/edition?format=text&language=${e}`),a=await t.json();allType=a.data,optionType="",createTypeOption(allType),retreve(optionType,type)}catch(e){}}let selectedLanguage,selectedType,selectedReader,allReader=[],optionReader="";function createReaderOption(e){for(let t=0;t<e.length;t++)optionReader+=`<option value="${e[t].identifier}">${e[t].name}</option>`}async function getReaderApi(e){try{let t=await fetch(`https://api.alquran.cloud/v1/edition?format=audio&language=${e}&type=versebyverse`),a=await t.json();if(allReader=a.data,optionReader="",createReaderOption(allReader),retreve(optionReader,reader),!t.ok)throw new Error("There are no readers for this language")}catch(e){optionReader=`<option disabled selected>${e.message}</option>`,retreve(optionReader,reader)}}function retreve(e,t){t.innerHTML=e}async function sort(){await getLangApi(),await getTypeApi(language.value),await getReaderApi(language.value)}sort(),language.addEventListener("change",(function(){getTypeApi(language.value),getReaderApi(language.value)})),form.addEventListener("submit",(function(e){e.preventDefault(),info={selectedLanguage:language.value,selectedType:type.value,selectedReader:reader.value,num:-1},localStorage.setItem("info",JSON.stringify(info))}));